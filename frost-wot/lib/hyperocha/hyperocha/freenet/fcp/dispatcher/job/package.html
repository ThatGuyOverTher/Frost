<!-- $Id$ -->
<body>the jobs.
<P>predefined jobs:<br>
<code>CHKFileInsertJob</code><br>
<code>CHKFileRequestJob</code>: full flowered fileinsert/request<br>
<code>CHKMessageInsertJob</code><br>
<code>CHKMessageRequestJob</code>: CHK message insert/request<br>
<code>KSKMessageInsertJob</code><br>
<code>KSKMessageRequestJob</code>: KSK message insert/request<br>
text text
<P>create your own jobs<br>
<pre>
public class MyJob extends Job {
	public MyJob(int requirednetworktype, String id) {
		super(requirednetworktype, id);
	}
}
</pre>
overwrite <code>doPrepare</code> 
text text


<P>Message handling<br>
fuer eigenes handling <code>public void incomingMessage(String id, NodeMessage msg)</code> oder
<code>public void incomingData(String id, NodeMessage msg, FCPConnection conn)</code> ueberschreiben.
<p>incomingMessage
<pre>
	public void incomingMessage(String id, NodeMessage msg) {
		if (msg.isMessageName("FooFromNode")) {
			//this overwrite the default handler 
			...
			// done, stopp handling chain
			return;  
		}
		// pass msg to default handler
		super.incomingMessage(id, msg);
		
		// unhandled (may be new) messages are left
		if (msg.isMessageName("BarFromNode")) {
			...
			// done, stopp handling chain
			return;  
		}
		if (msg.isMessageName("FooBarFromNode")) {
			...
			// last in chain
		}
	}
</pre>

<p>incomingData<br>
normalerweise ist es nicht notwendig, die zu ueberschreiben
<pre>
	public void incomingData(String id, NodeMessage msg, FCPConnection conn) {
		// the job class implement the defaulthandler skip the data,
		// dont super first 
		if (msg.isMessageName("AllData")) { // FCP 2
			...
			// dont forget to read the data 

			return; // data reat, break chain!
		}
		if (msg.isMessageName("DataChunk")) { // FCP 1
			long size = msg.getLongValue("Length", 16); 
			log.target("FooBar: " + size); 
			// data not read, dont return, super.
			// or the connection becomes confused
		}
		// make sure, all pending data are read (may be skiped).
		super.incomingData(id, msg, conn); 
	}

</pre>
	
text text

<P>notifier<br>
a few things to overwrite. see {@link hyperocha.freenet.fcp.dispatcher.job.Job} for details.
</body>
