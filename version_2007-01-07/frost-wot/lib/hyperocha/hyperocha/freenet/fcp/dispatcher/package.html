<!-- $Id$ -->
<body>The Dispatcher.<br>

This class is designed for control fcp commands and manage nodes lika a 
'high level' api.<br>
It's supports multiple nodes.. (mehr erz&auml;hle ich euch n&auml;chstes mal)
<p>
<b>Initialisation</b><br>
First you need to create an instance of the dispatcher.
<pre>
	Dispatcher dispatcher = new Dispatcher();
</pre>
Now set up at least one <code>Network</code> (see {@link hyperocha.freenet.fcp.Network} for details)
and assign this to the <code>Dispatcher</code>. 
<pre>
	dispatcher.addNetwork(network);
</pre>
You should set up the SecurityManager <b>before</b> you start the
dispatcher.<br>
<p>
If configured, add state listeners as wanted/needed. [need to expand] 
<p>
Last not least lets boot the <code>Dispatcher</code>.
<pre>
	dispatcher.startDispatcher();
</pre>
Now the engine starts up and its a god time to do other startup
things in your app (build the gui, for example).
<p>
The Dispatcher checks every 3 minutes the node online state and try to (re)connect
<p>
<b>Jobs</b><br>
<i>blocking mode</i><br>
text text text
<pre>
	job = new Job(...);
	
	int ec = dispatcher.runJob(job);
	
	if (ec != RUNJOB_NOERROR) {
		// the job isnt executed due a dispatcher error ('panic' level)
		// the job may be invalid!
		.. 
		return;
	}
	
	if ( job.isSuccess() ) {
		// the file is sent or recived, for example...
		Gui.blinkLamp(green);
	} else {
		// something did an oops.
		UserDialog(job.getLastError());
		.. or ..
		throw job.getLastError();
		.. or ..
		// ignore silencly
		.. or ..
		Screen.explode();
		.. or ..
		Child.grabAndEat();
	}
	
</pre>
see {@link hyperocha.freenet.fcp.dispatcher.job.Job} for details
<p>
<i>queued mode</i><br>
text text text 
<p>
<b>Dispatcher stati</b><br>
<dl>
  <dt>STATE_UNKNOWN</dt>  <dd>The Dispatcher isn't initialized jet.</dd>
  <dt>STATE_ERROR</dt> <dd>internal unresolved error. can be somthing beetween oops and panic</dd>
  <dt>STATE_STARTING</dt> <dd>the sheduler is starting up</dd>
  <dt>STATE_RUNNING</dt> <dd>the job sheduler and online monitor is up and working</dd>
  <dt>STATE_STOPPING</dt> <dd>the sheduler is shutting down</dd>
  <dt>STATE_STOPPED</dt> <dd>the sheduler is down</dd>
  <dt>STATE_IDLE</dt> <dd>up and nothing to do</dd>
</dl>
<p>
<b>Dispatcher.runJob error codes</b><br>
<dl>
	<dt>RUNJOB_NOERROR</dt> <dd>everybody like this :)</dd> 
	<dt>RUNJOB_PREPAREFAILED</dt> <dd>job runs prepare and isn't prepared after.</dd>
	<dt>RUNJOB_OFFLINE</dt> <dd>return without execution, nix fitting node for this job aviable / online</dd> 
	<dt>RUNJOB_OVERLOAD</dt> <dd>Box (cpu, mem, net, execution time to high) overloaded.</dd>
	<dt>RUNJOB_QUEUEFULL</dt> <dd>queue full</dd>
	<dt>RUNJOB_BROKEN</dt> <dd>urgs? panic() called? panic case
</dl>

 
</body>